import distutils.sysconfig
from os.path import realpath

engine_src = Glob("c++/engine/*.cc")
char_src = Glob("c++/characters/*.cc")
swig_src = Glob("c++/engine/*.i")

env = Environment(CPPPATH=[distutils.sysconfig.get_python_inc()],
                  SHLIBPREFIX="",
                  CXXFLAGS="-emit-llvm -O2 -g -Wall \
                            -Wno-overloaded-virtual -Wno-format\
                            -Wno-format-contains-nul \
                            -std=c++11 -pedantic")
env.Replace(CXX='clang')

linker = Builder(action = 'llvm-ld $SOURCE -b $TARGET')
env.Append(BUILDERS = {'Linker':linker})

objs = [env.Object(s) for s in engine_src + char_src]

env.Linker('engine', objs)
